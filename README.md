# 项目入口

java项目是在前一位开发编写的基础上进行更改和添加功能。目前java项目可以与有道翻译软件搭配使用。在有道配置代理信息后，就可以使用划词功能对数据库上的内容进行读取。

程序的访问入口，在`src\main\java\com\sjzb\demo\DemoApplication.java`，而java接收的请求全部都在`src\main\java\com\sjzb\demo\controller\AllController.java`里接收。



## 有道划词的请求处理

有道的请求都带有`/fsearch`,这个请求被函数拦截后，会进行处理。程序会读取数据库中的基本词类词、指标等标签进行模糊查询，返回相应的结果。

### 直接显示

直接显示指的是查询的结果直接返回到有道的页面上。通常这个信息只显示简短的名称列表。

### 跳转显示

跳转显示指的是从有道页面上单击某一个模糊查询列表的项，跳转到浏览器的页面上展示该项的所有属性信息，如果包含关系信息，则会在页面底部绘制图表信息。

#  代码解释

项目中主要为控制层、模型层、服务层、JDBC部分等。

控制层接收请求并进行简单处理与转发。

模型层记录着Neo4j数据库中每一个标签的一些属性信息、实体之间的关系描述等。

实现层主要是与JDBC部分对接，获取并处理数据后返回到控制层，主要包括查询结点、结点关系。

JDBC部分的内容放到了`Repository`里，这里等同于mapper。存储着与Neo4j数据库交互的Cql查询代码。

`Result`主要用于同一返回的JSON格式，但在有道的直接显示的功能里，有自己的数据格式，所以`Result`类就并不适用。

其余文件在代码中均有注释，就不在这里阐明。

# sjzb_proxy_setting.exe文件

这个文件用于快速配置有道程序的代理信息。

# Commit Log
## 2021-03-16
- 新增浏览实体，实现统计浏览次数统计与点赞交互
- 根据需求优化有道词典显示排版（目前只优化了指标、基本词类词）
- 根据需求优化有道词典查询列表的排版
- Redis暂时不用了
- 基本词类词、指标的服务实现新增统计指标访问次数
- DEBUG：关闭自动重启有道词典程序
- 新增枚举类型，对目前数据库已有的结点标签进行管理
- 优化有道词典配置程序（C#）的排版
- 【遗留问题】尝试将引入JS的方式改为从数据库读取，但是数据库存在转义的问题，读取无法使用，目前还原引入CDN的方式使用JS
- 基本词类词、指标Repository类新增SET Cnt语句
## 2021-03-09
- 优化自定义查询的显示文案
- 又一次修复了Tomcat运行默认端口8080的问题（哎）
- 迭代指标实体信息
- 新增实体：数据指标-实体
- 新增实体：数据指标-属性
- 新增对应关系实体：数据指标-实体、数据指标-属性
- 修改枚举实体的中文变量
- 控制层查询函数逻辑优化，精确查询模式下查询出结果即刻返回
- 修改详情页面HTML代码，优化“代码”下重复显示值的问题
- 修改详情页面HTML代码，修改图标题为关系链


## 2021-03-04
- 修复了因为新增自定义查询功能而产生的Bug
- 优化自定义查询功能的实现逻辑
- 修复新页面的Session不能记录到有道Session的问题
- 取消部分Sout输出简化排版内容
- 新增枚举信息以保持称呼一致
- 修复Tomcat运行时端口为默认8080的问题
## 2021-02-26
- 新增自定义查询排序功能
- 修复因网页与词典双端发起请求产生的Session不一致导致设置无效的问题
- 新增自定义Session监听
- 新增排序设置实体对象
- 优化请求处理顺序（仍在优化）

## 2021-02-23

- 完善Java调用外部程序的代码
- 新增从Jar读取资源文件至指定文件夹的函数（配合代理设置.exe）
- 优化代理设置.exe的代码（C#）

## 2021-02-22

- 优化控制层传参（新增关系）
- 优化基础节点实体
- 新增关系实体
- 基本词类词与指标实体新增关系查询
- lx工具新增判断辅助函数
- 前端新增图表显示（Echarts）
- 修复图表显示逻辑
- 优化前端界面
- 新增图表数据处理函数

## 2021-02-11

- 新年快乐~
- Happy Chinese Year~

## 2021-02-08

- 新增“报表/报文实体”；
- 新增查询向导：查询结果总数量超出50项时，展示查询向导块，单击向导标题可跳转至该类的结果列表。
- 前端页面展示逻辑更改为Handlebars处理。
- 优化页面排版效果；
- 追加有道代理设置程序【C#】，程序可以使用，待编写java执行代码；
- 修复基础结点的继承细则。

## 2021-02-05

- 新增“报表/报文实体”；
- 新增查询向导：查询结果总数量超出50项时，展示查询向导块，单击向导标题可跳转至该类的结果列表。
- 新增“IBM分类”实体，但查询出现问题，处于未完成状态。

## 2021-02-04

- 更改ip动态获取方式；
- 优化控制台输出文字效果；
- 更改“基本词类词”的显示内容，修补null时仍然执行导致报错的问题；
- 将“基础数据标准”与“代码”拆分查询，但目前无法排除多个标签的节点导致死查询且查询结果列表会重复，所以目前取消拆开显示；
- 修改显示界面边框超出的问题



## 2020-12-31

做了好多，不记得了